"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
"""
import requests
import json

API_URL = "https://backend-production-5eddb.up.railway.app/api/ingredients"

# –î–∞–Ω–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
names = [
    "ËäíÊûúÈ¢óÁ≤íÊûúÈÖ± –ì—Ä–∞–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∂–µ–º –∏–∑ –º–∞–Ω–≥–æ",
    "Á≤âÊ°ÉÈÖ±ÔºàÊåâ‰ª∂Âá∫Ôºâ–í–∞—Ä–µ–Ω—å–µ –∏–∑ —Ä–æ–∑–æ–≤—ã—Ö –ø–µ—Ä—Å–∏–∫–æ–≤ (–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—à—Ç—É—á–Ω–æ)",
    "È¶ôÊ©ôÊ±Å –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Å–æ–∫",
    "Ê†ëËéìÊ±Å –º–∞–ª–∏–Ω–æ–≤—ã–π —Å–æ–∫",
    "Ëë°ËêÑÂ§çÂêàÊûúÊ±Å –í–∏–Ω–æ–≥—Ä–∞–¥–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Å–æ–∫",
    "Á≥ñÊ∞¥Ëë°ËêÑÁΩêÂ§¥ –ö–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∏–Ω–æ–≥—Ä–∞–¥ –≤ —Å–∞—Ö–∞—Ä–Ω–æ–π –≤–æ–¥–µ",
    "Ë•øÊüöÈ¢óÁ≤í –ß–∞—Å—Ç–∏—Ü—ã –≥—Ä–µ–π–ø—Ñ—Ä—É—Ç–∞",
    "ÊãøÈìÅ –õ–∞—Ç—Ç–µ",
    "Êù®ÊûùÁîòÈú≤Á≤â –ü–æ—Ä–æ—à–æ–∫ –Ω–µ–∫—Ç–∞—Ä–∞ —Ç–æ–ø–æ–ª—è",
    "ÁôæÈ¶ôÊûú –º–∞—Ä–∞–∫—É–π—è",
    "ÊûúÁ≥ñ —Ñ—Ä—É–∫—Ç–æ–∑–∞",
    "Ê§∞Êûú –ö–æ–∫–æ—Å",
    "ÈªëÁèçÁè† —á–µ—Ä–Ω–∞—è –∂–µ–º—á—É–∂–∏–Ω–∞",
    "Êñ∞ÂûãÈïøËÑÜÁ≠íÔºàÂ∏¶Á∫∏ÊâòÔºâ–ù–æ–≤—ã–π –¥–ª–∏–Ω–Ω—ã–π —Ç—É–±—É—Å –¥–ª—è —Ö—Ä—É—Å—Ç—è—â–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (—Å –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–º –¥–ª—è –±—É–º–∞–≥–∏)",
    "ÂéüÂë≥ÂÜ∞Ê∑áÊ∑ãÁ≤â –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ—à–æ–∫ –¥–ª—è –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ",
    "–ú–æ—Ä–æ–∂–µ–Ω–æ–µ —à–æ–∫–æ–ª–∞–¥–Ω–æ–µ",
    "Â•∂Ëå∂‰º¥‰æ£ –∫–æ–º–ø–∞–Ω—å–æ–Ω –¥–ª—è —á–∞—è —Å –º–æ–ª–æ–∫–æ–º",
    "ÊûúËúú –ù–µ–∫—Ç–∞—Ä",
    "Â∏É‰∏ÅÁ≤â –ü—É–¥–∏–Ω–≥–æ–≤—ã–π –ø–æ—Ä–æ—à–æ–∫",
    "ÈªëÁ≥ñÁ≥ñÊµÜ —Å–∏—Ä–æ–ø –∏–∑ –∫–æ—Ä–∏—á–Ω–µ–≤–æ–≥–æ —Å–∞—Ö–∞—Ä–∞",
    "Â∑ßÂÖãÂäõÊµÜ —à–æ–∫–æ–ª–∞–¥–Ω—ã–π —Å–æ—É—Å",
    "ËçâËéìÊûúÊµÜ –∫–ª—É–±–Ω–∏—á–Ω–æ–µ –≤–∞—Ä–µ–Ω—å–µ",
    "ËìùËéìÊûúÊµÜ —á–µ—Ä–Ω–∏—á–Ω–∞—è –º—è–∫–æ—Ç—å",
    "ËúúÊ°ÉÂÜª –ü–µ—Ä—Å–∏–∫–æ–≤–æ–µ –∂–µ–ª–µ",
    "Á∫¢Ë±ÜÁΩêÂ§¥ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫—Ä–∞—Å–Ω–∞—è —Ñ–∞—Å–æ–ª—å",
    "Âç°Â∏ÉÂ•áËØ∫ –∫–∞–ø—É—á–∏–Ω–æ",
    "ÊäπËå∂ÂÜ∞Ê∑áÊ∑ãÁ≤â –ü–æ—Ä–æ—à–æ–∫ –¥–ª—è –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ –ú–∞—Ç—á–∞",
    "Â••Âà©Â••Á¢éÂ±ë –û—Ä–µ–æ –ö—Ä–∞–º–±–ª",
    "Ëåâ‰∏äÈùíÈ£é –ü—Ä–æ—Ö–ª–∞–¥–Ω—ã–π –≤–µ—Ç–µ—Ä–æ–∫ –Ω–∞ –ú–æ—à–∞–Ω–≥–µ",
    "Ê¢ÖÂç†Á∫¢Ëå∂ –ß–µ—Ä–Ω—ã–π —á–∞–π –ú—ç–π–∂–∞–Ω",
    "WE.500-90Â°ëÊùØÔºàPPÊùØÔºâ–°—Ç–∞–∫–∞–Ω –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–π WE.500-90 (—Å—Ç–∞–∫–∞–Ω –ü–ü)",
    "WE.700-90Â°ëÊùØÔºàPPÊùØÔºâ–ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–π —Å—Ç–∞–∫–∞–Ω WE.700-90 (—Å—Ç–∞–∫–∞–Ω –ü–ü)",
    "Âê®Âê®Ê°∂ÔºàÊñ∞Ôºâ–¢–æ–Ω–Ω–∞ —Ç–æ–Ω–Ω–∞ –±–æ—á–∫–∞ (–Ω–æ–≤–∞—è)",
    "UÂûãÊùØ U-–æ–±—Ä–∞–∑–Ω–∞—è —á–∞—à–∫–∞",
    "Á∫∏ËÜúÁ≤óÂê∏ÁÆ° –°–æ–ª–æ–º–∏–Ω–∫–∏ –∏–∑ –±—É–º–∞–∂–Ω–æ–π –ø–ª–µ–Ω–∫–∏",
    "Á∫∏ËÜúÁªÜÂê∏ÁÆ° —Ç—Ä—É–±–æ—á–∫–∏ –∏–∑ –±—É–º–∞–∂–Ω–æ–π –ø–ª–µ–Ω–∫–∏",
    "WE. ÁêÉÂΩ¢ÁõñÔºà90ÔºâWE. –°—Ñ–µ—Ä–∏—á–µ—Å–∫–∞—è –∫—Ä—ã—à–∫–∞ (90)",
    "WE.Â§ßÈïøÂã∫ WE.–ö–æ–≤—à",
    "WE.‰∏ìÁî®Âã∫ WE.—Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–∂–∫–∞",
    "WE.Â∞ÅÂè£ËÜú WE.—É–ø–ª–æ—Ç–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–ª–µ–Ω–∫–∞",
    "WE.ÂçïÊùØË¢ã WE.—Å—É–º–∫–∞ –Ω–∞ –æ–¥–Ω—É —á–∞—à–∫—É",
    "WE.ÂèåÊùØË¢ã WE.–°—É–º–∫–∞ –Ω–∞ –¥–≤–æ–π–Ω—É—é —á–∞—à–∫—É",
    "ÂõõÊùØË¢ã —Å—É–º–∫–∞ –Ω–∞ —á–µ—Ç—ã—Ä–µ —á–∞—à–∫–∏",
    "16A‰∏≠Á©∫Á∫∏ÊùØ 16A –ü–æ–ª—ã–π –±—É–º–∞–∂–Ω—ã–π —Å—Ç–∞–∫–∞–Ω—á–∏–∫",
    "90Ê≥®Â°ëÈò≤ÊºèËøû‰ΩìÁõñ-Èªë 90 –ª–∏—Ç–∞—è –≥–µ—Ä–º–µ—Ç–∏—á–Ω–∞—è —Ü–µ–ª—å–Ω–∞—è –∫—Ä—ã—à–∫–∞ - —á–µ—Ä–Ω–∞—è"
]

packaging = [
    "1,2 –∫–≥ * 12 –±–∞–Ω./–∫–æ—Ä.",
    "1,2 –∫–≥ * 12 –±–∞–Ω./–∫–æ—Ä.",
    "2,6 –∫–≥ * 8 –±–∞–Ω./–∫–æ—Ä.",
    "2,6 –∫–≥ * 8 –±–∞–Ω./–∫–æ—Ä.",
    "2,6 –∫–≥ * 8 –±—É—Ç./–∫–æ—Ä.",
    "0,85 –∫–≥ * 12 –±–∞–Ω./–∫–æ—Ä.",
    "0,85 –∫–≥ * 12 –±–∞–Ω./–∫–æ—Ä.",
    "1 –∫–≥ * 20 —É–ø./–∫–æ—Ä.",
    "1 –∫–≥ * 20 —É–ø./–∫–æ—Ä.",
    "2 –∫–≥ * 6 –±–∞–Ω./–∫–æ—Ä.",
    "12,5 –∫–≥ * 2 –±–∞–Ω./–∫–æ—Ä.",
    "2,5 –∫–≥ * 8 –ø–∞–∫./–∫–æ—Ä.",
    "1 –∫–≥ * 20 —É–ø./–∫–æ—Ä.",
    "400 —à—Ç./–∫–æ—Ä.",
    "3 –∫–≥ * 8 –ø–∞–∫./–∫–æ—Ä.",
    "3 –∫–≥ * 8 –ø–∞–∫./–∫–æ—Ä.",
    "3 –∫–≥ * 8 –ø–∞–∫./–∫–æ—Ä.",
    "5,5 –∫–≥ * 4 –±–∞–Ω./–∫–æ—Ä.",
    "1 –∫–≥ * 20 —É–ø./–∫–æ—Ä.",
    "2,7 –∫–≥ * 8 –±–∞–Ω./–∫–æ—Ä.",
    "2,7 –∫–≥ * 8 –±–∞–Ω./–∫–æ—Ä.",
    "2 –∫–≥ * 6 –±–∞–Ω./–∫–æ—Ä.",
    "2 –∫–≥ * 6 –±–∞–Ω./–∫–æ—Ä.",
    "1 –ª * 10 –∫–æ—Ä./–∫–æ—Ä.",
    "0,9 –∫–≥ * 12 –±–∞–Ω./–∫–æ—Ä.",
    "1 –∫–≥ * 20 —É–ø./–∫–æ—Ä.",
    "3 –∫–≥ * 8 –ø–∞–∫./–∫–æ—Ä.",
    "0,454 –∫–≥ * 24 —É–ø./–∫–æ—Ä.",
    "0,05 –∫–≥ * 160 —É–ø./–∫–æ—Ä.",
    "0,1 –∫–≥ * 120 —É–ø./–∫–æ—Ä.",
    "1000 —à—Ç./–∫–æ—Ä.",
    "1000 —à—Ç./–∫–æ—Ä.",
    "200 –∫–æ–º–ø–ª./–∫–æ—Ä.",
    "1000 —à—Ç./–∫–æ—Ä.",
    "4000 —à—Ç./–∫–æ—Ä.",
    "5000 —à—Ç./–∫–æ—Ä.",
    "2000 —à—Ç./–∫–æ—Ä.",
    "2000 —à—Ç./–∫–æ—Ä.",
    "1000 —à—Ç./–∫–æ—Ä.",
    "12 —Ä—É–ª./–∫–æ—Ä.",
    "10000 —à—Ç./–∫–æ—Ä.",
    "5000 —à—Ç./–∫–æ—Ä.",
    "3000 —à—Ç./–∫–æ—Ä.",
    "500 —à—Ç./–∫–æ—Ä.",
    "1000 —à—Ç./–∫–æ—Ä."
]

box_weight = [
    14.4, 14.4, 20.8, 20.8, 20.8, 10.2, 10.2, 20, 20, 12, 25, 20, 20, 400,
    24, 24, 24, 22, 20, 22, 21.6, 12, 12, 10, 10.8, 20, 24, 10.896, 8, 12,
    1000, 1000, 200, 1000, 4000, 5000, 2000, 2000, 1000, 12, 10000, 5000, 3000, 500, 1000
]

box_price = [
    33600, 33600, 45500, 49000, 35000, 22400, 38500, 52500, 59500, 26600,
    19600, 12600, 21000, 155560, 56000, 71000, 52500, 24500, 56000, 35000,
    33600, 18200, 25200, 11200, 14000, 52500, 63000, 0, 95200, 101500,
    21000, 27300, 21840, 21000, 22400, 14700, 22400, 26600, 8400, 68600,
    52500, 47600, 49000, 31500, 17500
]

def determine_unit_and_category(name, pkg):
    """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é"""
    # –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
    if "—à—Ç." in pkg or "–∫–æ–º–ø–ª." in pkg or "—Ä—É–ª." in pkg:
        unit = "—à—Ç"
    elif "–ª" in pkg and "–∫–≥" not in pkg:
        unit = "–ª"
    else:
        unit = "–∫–≥"

    # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
    name_lower = name.lower()
    if any(word in name_lower for word in ["–¥–∂–µ–º", "–≤–∞—Ä–µ–Ω—å–µ", "–ø—é—Ä–µ"]):
        category = "–ü—é—Ä–µ"
    elif any(word in name_lower for word in ["—Å–æ–∫", "juice"]):
        category = "–°–æ–∫"
    elif any(word in name_lower for word in ["–ø–æ—Ä–æ—à–æ–∫", "powder"]):
        category = "–ü–æ—Ä–æ—à–æ–∫"
    elif any(word in name_lower for word in ["–º–æ—Ä–æ–∂–µ–Ω–æ–µ", "ice cream"]):
        category = "–ú–æ—Ä–æ–∂–µ–Ω–æ–µ"
    elif any(word in name_lower for word in ["—Å–∏—Ä–æ–ø", "—Ñ—Ä—É–∫—Ç–æ–∑–∞", "—Å–∞—Ö–∞—Ä"]):
        category = "–°–∏—Ä–æ–ø—ã"
    elif any(word in name_lower for word in ["—á–∞–π", "tea", "–ª–∞—Ç—Ç–µ", "–∫–∞–ø—É—á–∏–Ω–æ"]):
        category = "–ß–∞–π/–ö–æ—Ñ–µ"
    elif any(word in name_lower for word in ["—Å—Ç–∞–∫–∞–Ω", "cup", "ÊùØ", "–∫—Ä—ã—à–∫–∞", "Áõñ", "Ë¢ã", "—Å—É–º–∫–∞", "Âê∏ÁÆ°", "—Å–æ–ª–æ–º–∏–Ω–∫–∞", "Âã∫", "–ª–æ–∂–∫–∞", "–ø–ª–µ–Ω–∫–∞", "ËÜú", "—Ç—É–±—É—Å", "Á≠í"]):
        category = "–£–ø–∞–∫–æ–≤–∫–∞"
    elif any(word in name_lower for word in ["–∂–µ–º—á—É–∂–∏–Ω–∞", "ÁèçÁè†", "–∫–æ–∫–æ—Å", "Ê§∞Êûú"]):
        category = "–¢–æ–ø–ø–∏–Ω–≥–∏"
    elif any(word in name_lower for word in ["–∂–µ–ª–µ", "–ø—É–¥–∏–Ω–≥"]):
        category = "–î–µ—Å–µ—Ä—Ç—ã"
    else:
        category = "–î—Ä—É–≥–æ–µ"

    return unit, category

def create_ingredients():
    """–°–æ–∑–¥–∞—Ç—å –≤—Å–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã"""
    ingredients = []

    for i in range(len(names)):
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ –Ω–µ—Ç —Ü–µ–Ω—ã
        if box_price[i] == 0:
            print(f"‚ö†Ô∏è  –ü—Ä–æ–ø—É—Å–∫ #{i+1}: {names[i]} (–Ω–µ—Ç —Ü–µ–Ω—ã)")
            continue

        unit, category = determine_unit_and_category(names[i], packaging[i])
        price_per_unit = round(box_price[i] / box_weight[i], 2)

        ingredient = {
            "name": names[i],
            "category": category,
            "unit": unit,
            "purchase_price": price_per_unit,
            "packaging_info": packaging[i]
        }

        ingredients.append(ingredient)

    return ingredients

def import_to_api():
    """–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ API"""
    ingredients = create_ingredients()

    print(f"üöÄ –ù–∞—á–∏–Ω–∞—é –∏–º–ø–æ—Ä—Ç {len(ingredients)} –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤...\n")

    success_count = 0
    error_count = 0

    for i, ingredient in enumerate(ingredients, 1):
        try:
            response = requests.post(
                API_URL,
                json=ingredient,
                headers={"Content-Type": "application/json"},
                timeout=10
            )

            if response.status_code == 201:
                success_count += 1
                print(f"‚úÖ {i}/{len(ingredients)}: {ingredient['name'][:50]}... ({ingredient['purchase_price']} —Ç–≥/{ingredient['unit']})")
            else:
                error_count += 1
                print(f"‚ùå {i}/{len(ingredients)}: {ingredient['name'][:50]}... - –û—à–∏–±–∫–∞ {response.status_code}: {response.text[:100]}")

        except Exception as e:
            error_count += 1
            print(f"‚ùå {i}/{len(ingredients)}: {ingredient['name'][:50]}... - –û—à–∏–±–∫–∞: {str(e)}")

    print(f"\n{'='*60}")
    print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {success_count}")
    print(f"‚ùå –û—à–∏–±–æ–∫: {error_count}")
    print(f"üìä –í—Å–µ–≥–æ: {len(ingredients)}")
    print(f"{'='*60}")

if __name__ == "__main__":
    import_to_api()
